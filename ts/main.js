(()=>{const x=function(e){return new Promise(t=>{var n=document.createElement("script");n.src=e,n.onload=()=>{t()},document.head.appendChild(n)})},P=function(e){return new Promise(t=>{var n=document.createElement("link");n.href=e,n.type="text/css",n.rel="stylesheet",n.onload=()=>{t()},document.head.appendChild(n)})};var N=function(e){for(var t=function(s){for(var a=s.childNodes,i=a.length,u=[],d,g,c,m,p=0;p<i;p++){if(d=a[p],d.nodeType!==1)continue;g=d.children[0],c=g.getAttribute("data-size").split("x"),m={src:g.getAttribute("href"),w:parseInt(c[0],10),h:parseInt(c[1],10)},d.children.length>1&&(m.title=d.children[1].innerHTML),g.children.length>0&&(m.msrc=g.children[0].getAttribute("src")),m.el=d,u.push(m)}return u},n=function s(a,i){return a&&(i(a)?a:s(a.parentNode,i))},o=function(s){s=s||window.event,s.preventDefault?s.preventDefault():s.returnValue=!1;var a=s.target||s.srcElement,i=n(a,function(v){return v.tagName&&v.tagName.toUpperCase()==="FIGURE"});if(!i)return;for(var u=i.parentNode,d=i.parentNode.childNodes,g=d.length,c=0,m,p=0;p<g;p++){if(d[p].nodeType!==1)continue;if(d[p]===i){m=c;break}c++}return m>=0&&l(m,u),!1},r=function(){var s=window.location.hash.substring(1),a={};if(s.length<5)return a;for(var i=s.split("&"),u=0;u<i.length;u++){if(!i[u])continue;var d=i[u].split("=");if(d.length<2)continue;a[d[0]]=d[1]}return a.gid&&(a.gid=parseInt(a.gid,10)),a},l=function(s,a,i,u){var d=document.querySelectorAll(".pswp")[0],g,c,m;if(m=t(a),c={galleryUID:a.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(v){var I=m[v].el.getElementsByTagName("img")[0],A=window.pageYOffset||document.documentElement.scrollTop,S=I.getBoundingClientRect();return{x:S.left,y:S.top+A,w:S.width}}},u)if(c.galleryPIDs){for(var p=0;p<m.length;p++)if(m[p].pid==s){c.index=p;break}}else c.index=parseInt(s,10)-1;else c.index=parseInt(s,10);if(isNaN(c.index))return;i&&(c.showAnimationDuration=0),g=new PhotoSwipe(d,PhotoSwipeUI_Default,m,c),g.init()},h=document.querySelectorAll(e),y=0,w=h.length;y<w;y++)h[y].setAttribute("data-pswp-uid",y+1),h[y].onclick=o;var b=r();b.pid&&b.gid&&l(b.pid,h[b.gid-1],!0,!0)};function T(e){let t=document.createElement("div");t.className="gallery";let n=e[0].parentNode,o=e[0];n.insertBefore(t,o);for(let r=0;r<e.length;++r){const l=e[r].querySelector("img").width,h=e[r].querySelector("img").height;e[r].style.flexGrow=`${l*100/h}`,e[r].style.flexBasis=`${l*240/h}px`,t.appendChild(e[r])}}function M(){const e=[x("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"),x("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"),P("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"),P("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css")];return Promise.all(e)}function E(e){const t=document.querySelector(e).querySelectorAll("figure");if(t.length){let n=[t[0]];for(let o=1;o<t.length;++o)t[o].previousElementSibling===n[n.length-1]?n.push(t[o]):(T(n),n=[t[o]]);n.length>0&&T(n),M().then(()=>{const o=document.querySelector(".pswp");o.style.removeProperty("display"),N(`${e} .gallery`)})}}let f={};if(localStorage.hasOwnProperty("StackColorsCache"))try{f=JSON.parse(localStorage.getItem("StackColorsCache"))}catch(e){f={}}async function k(e,t,n){if(!e)return await Vibrant.from(n).getPalette();if(!f.hasOwnProperty(e)||f[e].hash!==t){const o=await Vibrant.from(n).getPalette();f[e]={hash:t,Vibrant:{hex:o.Vibrant.hex,rgb:o.Vibrant.rgb,bodyTextColor:o.Vibrant.bodyTextColor},DarkMuted:{hex:o.DarkMuted.hex,rgb:o.DarkMuted.rgb,bodyTextColor:o.DarkMuted.bodyTextColor}},localStorage.setItem("StackColorsCache",JSON.stringify(f))}return f[e]}let B=(e,t=500)=>{e.classList.add("transiting"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",window.setTimeout(()=>{e.classList.remove("show"),e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("transiting")},t)},H=(e,t=500)=>{e.classList.add("transiting"),e.style.removeProperty("display"),e.classList.add("show");let n=e.offsetHeight;e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("transiting")},t)},q=(e,t=500)=>window.getComputedStyle(e).display==="none"?H(e,t):B(e,t);function L(){const e=document.getElementById("toggle-menu");e&&e.addEventListener("click",()=>{if(document.getElementById("main-menu").classList.contains("transiting"))return;document.body.classList.toggle("show-menu"),q(document.getElementById("main-menu"),300),e.classList.toggle("is-active")})}function V(e,t,n){var o=document.createElement(e);for(let r in t)if(r&&t.hasOwnProperty(r)){let l=t[r];r=="dangerouslySetInnerHTML"?o.innerHTML=l.__html:l===!0?o.setAttribute(r,r):l!==!1&&l!=null&&o.setAttribute(r,l.toString())}for(let r=2;r<arguments.length;r++){let l=arguments[r];l&&o.appendChild(l.nodeType==null?document.createTextNode(l.toString()):l)}return o}var C=V;let D={init:()=>{L(),document.querySelector(".article-content")&&E(".article-content"),document.querySelectorAll(".color-tag").forEach(async t=>{const n=t.getAttribute("data-image"),o=t.getAttribute("data-key"),r=t.getAttribute("data-hash"),l=await k(o,r,n);t.style.color=l.Vibrant.bodyTextColor,t.style.background=l.Vibrant.hex});const e=document.querySelector(".article-list--tile");if(e){let t=new IntersectionObserver(async(n,o)=>{n.forEach(r=>{if(!r.isIntersecting)return;o.unobserve(r.target);const l=r.target.querySelectorAll("article.has-image");l.forEach(async h=>{const y=h.querySelector("img"),w=y.src,b=y.getAttribute("data-key"),s=y.getAttribute("data-hash"),a=h.querySelector(".article-details"),i=await k(b,s,w);a.style.background=`
                        linear-gradient(0deg, 
                            rgba(${i.DarkMuted.rgb[0]}, ${i.DarkMuted.rgb[1]}, ${i.DarkMuted.rgb[2]}, 0.5) 0%, 
                            rgba(${i.Vibrant.rgb[0]}, ${i.Vibrant.rgb[1]}, ${i.Vibrant.rgb[2]}, 0.75) 100%)`})})});t.observe(e)}}};window.addEventListener("load",()=>{setTimeout(function(){D.init()},0)});window.Stack=D;window.createElement=C;})();
/*!
*   Hugo Theme Stack
*
*   @author: Jimmy Cai
*   @website: https://jimmycai.com
*   @link: https://github.com/CaiJimmy/hugo-theme-stack
*/
